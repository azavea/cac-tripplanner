<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2e68a3">
    <meta name="apple-mobile-web-app-status-bar-style" content="#2e68a3">

    {% block pagetitle %}
    <title>{% block title %}GoPhillyGo | Trip Planning for Bikes, Public Transit, and Walking | Clean Air Council{% endblock %}</title>

    <meta property="og:title" content="GoPhillyGo" />
    <meta name="twitter:title" content="GoPhillyGo" />
    <meta name="apple-mobile-web-app-title" content="GoPhillyGo">
    <meta property="og:type" content="place" />
    <meta property="og:rich_attachment" content="true" />
    {% endblock %}

    {% block extrametatags %}
    <meta property="fb:app_id" content="{{ fb_app_id }}" />
    <meta property="fb:pages" content="299797223477237" />
    <meta property="fb:profile_id" content="gophillygo" />
    <meta property="og:url" content="{{ request.build_absolute_uri }}" />
    <meta property="og:description"
        content="GoPhillyGo from the Clean Air Council, for planning transit, walking, and biking trips around the Delaware Valley region.  Features parks and other destinations." />
    <meta property="og:site_name" content="GoPhillyGo" />
    <meta property="og:locale" content="en_US" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@go_philly_go" />
    <meta name="twitter:description" content="Helping you get around greater Philly" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="600" />
    <meta property="og:image" content="{% if request.is_secure %}https{% else %}http{% endif %}://{{ request.META.HTTP_HOST }}/static/images/sharing_logo_1200_600.png" />
    <meta name="twitter:image" content="{% if request.is_secure %}https{% else %}http{% endif %}://{{ request.META.HTTP_HOST }}/static/images/sharing_logo_1200_600.png" />
    {% endblock %}

    {% include "partials/ios-weblinks.html" %}

    {% block cssimports %}

    <link href="{% static 'styles/vendor.css' %}" rel="stylesheet">
    <link href="{% static 'styles/main.css' %}" rel="stylesheet">

    <link rel="apple-touch-icon" sizes="120x120" href="{% static 'images/ios-app-icon-120.png' %}" />
    <link rel="apple-touch-icon" sizes="152x152" href="{% static 'images/ios-app-icon-152.png' %}" />
    <link rel="apple-touch-icon" sizes="167x167" href="{% static 'images/ios-app-icon-167.png' %}" />
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/ios-app-icon-180.png' %}" />
    <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}" sizes="32x32" />
    <link rel="manifest" href="/manifest.json">

    {% endblock %}

    {% block extracss %}
    {% endblock %}

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EE36F23XEW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EE36F23XEW');
    </script>

  </head>

  <body>
    {% block body %}
    <div class="body-wrapper">
      {% include "partials/alert-banner.html" %}
      <div id="body-div" class="body-{{ tab|default:'home' }}
          {% if 'map' in tab %}body-map{% endif %}">
          {% block content %}<h1>I'm abstract - you should never see me!</h1>{% endblock %}
      </div>
    </div>
    {% endblock body %}

    {% block jsimports %}

    {% if debug %}

    {% if fb_app_id %}
    <!-- facebook loads async; might not be there during module init! -->
    <!-- loading debug version here -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk/debug.js#xfbml=1&version=v2.3&appId={{ fb_app_id }}";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    {% endif %}
    <script src="{% static 'scripts/vendor/index.js' %}"></script>
    <script src="{% static 'scripts/vendor/jquery.js' %}"></script>
    <script src="{% static 'scripts/vendor/Sortable.js' %}"></script>
    <script src="{% static 'scripts/vendor/jquery-sortable.js' %}"></script>
    <script src="{% static 'scripts/vendor/cartodb.uncompressed.js' %}"></script>
    <script src="{% static 'scripts/vendor/leaflet.awesome-markers.js' %}"></script>
    <script src="{% static 'scripts/vendor/js.storage.js' %}"></script>
    <script src="{% static 'scripts/vendor/lodash.js' %}"></script>
    <script src="{% static 'scripts/vendor/handlebars.js' %}"></script>
    <script src="{% static 'scripts/vendor/Polyline.encoded.js' %}"></script>
    <script src="{% static 'scripts/vendor/typeahead.bundle.js' %}"></script>
    <script src="{% static 'scripts/vendor/turf-helpers.js' %}"></script>
    <script src="{% static 'scripts/vendor/turf-distance.js' %}"></script>
    <script src="{% static 'scripts/vendor/turf-point-on-line.js' %}"></script>
    <script src="{% static 'scripts/vendor/moment.js' %}"></script>
    <script src="{% static 'scripts/vendor/moment-duration-format.js' %}"></script>
    <script src="{% static 'scripts/vendor/route.js' %}"></script>
    <script src="{% static 'scripts/vendor/tiny-slider.js' %}"></script>

    <script src="{% static 'scripts/main/cac/cac.js' %}"></script>
    <script src="{% static 'scripts/main/cac/utils.js' %}"></script>
    <script src="{% static 'scripts/main/cac/user/cac-user-preferences.js' %}"></script>
    <script src="{% static 'scripts/main/cac/search/cac-search-params.js' %}"></script>
    <script src="{% static 'scripts/main/cac/search/cac-geocoder.js' %}"></script>
    <script src="{% static 'scripts/main/cac/search/cac-typeahead.js' %}"></script>
    <script src="{% static 'scripts/main/cac/routing/cac-routing-itinerary.js' %}"></script>
    <script src="{% static 'scripts/main/cac/routing/cac-routing-plans.js' %}"></script>
    <script src="{% static 'scripts/main/cac/places/cac-places.js' %}"></script>
    <script src="{% static 'scripts/main/cac/urlrouting/cac-urlrouting.js' %}"></script>
    <script src="{% static 'scripts/main/cac/home/cac-home-templates.js' %}"></script>
    <script src="{% static 'scripts/main/cac/map/cac-map-control.js' %}"></script>
    <script src="{% static 'scripts/main/cac/map/cac-map-isochrone.js' %}"></script>
    <script src="{% static 'scripts/main/cac/map/cac-map-itinerary.js' %}"></script>
    <script src="{% static 'scripts/main/cac/map/cac-map-overlays.js' %}"></script>
    <script src="{% static 'scripts/main/cac/map/cac-map-templates.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-filter-options.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-mode-options.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-modal.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-tab.js' %}"></script>
    <script src="{% static 'scripts/main/cac/share/cac-share-modal.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-trip-options.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-directions-form.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-explore.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-directions.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-itinerary-list.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-directions-list.js' %}"></script>
    <script src="{% static 'scripts/main/cac/control/cac-control-tour-list.js' %}"></script>
    <script src="{% static 'scripts/main/cac/pages/cac-pages-home.js' %}"></script>
    <script src="{% static 'scripts/main/cac/pages/cac-pages-directions.js' %}"></script>

    {% else %}

    {% if fb_app_id %}
    <!-- facebook loads async; might not be there during module init! -->
    <!-- loading minified version here -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId={{ fb_app_id }}";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    {% endif %}

    <script src="{% static 'scripts/vendor.js' %}"></script>
    <script src="{% static 'scripts/main.js' %}"></script>

    {% endif %}

    {% endblock %}

    <script type="text/javascript">
        jQuery.noConflict(); // because JotForms.
    </script>

    {% block jspage %}
    {% endblock %}
  </body>
</html>
